<!DOCTYPE html>
<html>
<head>

    <title>Aprendizdev</title>
    <%= csrf_meta_tags %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>

</head>
<body>

	<nav class="navbar navbar-light bg-white  navbar-expand-md shadow-sm p-3 bg-white rounded">
    	<div class="container">

      		<a class="navbar-brand" href="/"> aprendizDEV </a>
            
      		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav3" aria-controls="navbarNav3" aria-expanded="false" aria-label="Toggle navigation">
        		<span class="navbar-toggler-icon"></span>
      		</button>
      		<div class="collapse navbar-collapse" id="navbarNav3">
        		<ul class="navbar-nav ml-auto">
          			<li class="nav-item active">
            			<a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
          			</li>
          			<li class="nav-item">
            			<a class="nav-link" href="/about">Sobre</a>
          			</li>
          			<li class="nav-item">
            			<a class="nav-link" href="/contacts">Contato</a>
          			</li>
                    <li class="nav-item">
                        &nbsp; &nbsp; &nbsp; &nbsp;
                    </li>
        		</ul>

                <% 
                    if request.env['PATH_INFO'] == '/login'                               
                        botaoLogin = 'active' 
                    elsif request.env['PATH_INFO'] == '/users/new'                         
                        botaoCadastrar = 'active'                                        
                    end    
                %> 

				<% if logged_in? %>

                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <%= icon('far', 'user', class: 'strong') %> <%= current_user.nome.to_s.split(' ')[0] %> 
                        </button>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            
                            <a class="dropdown-item" href="/profile">Minha conta</a>                          

                            <%= button_to "Sair", '/logout', method: :get, class: "dropdown-item", data: {title: "Atenção!", confirm: 'Tem certeza que deseja sair?', commit: 'Sair', cancel: "Cancelar"}  %>

                        </div>
                    </div>
	
				<% else %>

					<div class="btn-group" role="group" aria-label="Basic example">
						<%= link_to "Entrar", '/login', method: :get, class: "btn btn-outline-dark #{botaoLogin}"%>
						<%= link_to "Cadastrar", '/users/new', method: :get, class: "btn btn-outline-dark #{botaoCadastrar}"%>
					</div>

				<%end%>

      		</div>
    	</div>
  	</nav>

	<%= yield %>

</body>
</html>
